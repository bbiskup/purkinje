sudo: required
dist: trusty
python:
  - "2.7"
cache:
  apt: true
  # TODO local node modules path correct?
  directories:
    - $HOME/data

before_install:
    - type docker
    - docker --version
    - type docker-compose
    - docker-compose --version

    - sudo service docker stop
    - sudo bash -c "curl -L https://get.docker.com/builds/Linux/x86_64/docker-1.11.0.tgz > /usr/bin/docker"
    - sudo chmod +x /usr/bin/docker
    - sudo service docker restart
    - docker ps
    - sudo bash -c "curl -L https://github.com/docker/compose/releases/download/1.7.1/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose"
    - sudo chmod +x /usr/local/bin/docker-compose
    - type docker-compose
    - docker-compose --version

    - sudo apt-get update -yy
    - sudo apt-get install make

install:
    - make stack-up

script:
   - make test
   - make doc

# after_success:
#   make coveralls
